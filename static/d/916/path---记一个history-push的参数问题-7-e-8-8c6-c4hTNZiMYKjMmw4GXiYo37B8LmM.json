{"data":{"site":{"siteMetadata":{"title":" Blog","author":"lqs469"}},"markdownRemark":{"id":"810a9f83-0a02-5bfb-b2c6-c2155e5e8a06","excerpt":"å¯¹äºä½¿ç”¨reactçš„å¼€å‘è€…æ¥è¯´ï¼Œreact-routerè‡ªç„¶ä¸é™Œç”Ÿï¼Œè€Œä»ç†Ÿæ‚‰çš„äººä»¬éƒ½çŸ¥é“ï¼Œåœ¨react-router2.0åˆ°3.0çš„ç‰ˆæœ¬å‡çº§ä¸­ï¼ŒAPIâ€¦","html":"<p>å¯¹äºä½¿ç”¨reactçš„å¼€å‘è€…æ¥è¯´ï¼Œreact-routerè‡ªç„¶ä¸é™Œç”Ÿï¼Œè€Œä»ç†Ÿæ‚‰çš„äººä»¬éƒ½çŸ¥é“ï¼Œåœ¨react-router2.0åˆ°3.0çš„ç‰ˆæœ¬å‡çº§ä¸­ï¼ŒAPIæœ‰äº†å¾ˆå¤§çš„æ”¹å˜ï¼Œå¯ä»¥è¯´å‡ ä¹å˜æˆäº†å¦ä¸€ç§ç”¨æ³•ï¼Œè¿™é‡Œå¯¹ç‰ˆæœ¬å˜åŒ–å•¥çš„ä¸å•°å—¦ä»€ä¹ˆï¼Œç½‘ä¸Šçš„æ–‡ç« ä¹Ÿæœ‰å¾ˆå¤šï¼Œè™½ç„¶å¾ˆæ‚ä¹±ï¼Œä½†ä¹Ÿä¸ä¹æœ‰æ¯”è¾ƒå¥½çš„å‡ºç°ã€‚è¿½å…¶æ ¹æœ¬ï¼Œæœ€å¥½çš„ä¸Šæ‰‹æ–¹å¼è¿˜æ˜¯è¦ç†Ÿè¯»å®˜æ–¹æ–‡æ¡£ï¼ŒButï¼Œè¿™é‡Œå°±æ˜¯å¯¹å®˜æ–¹æ–‡æ¡£å†™ä¸€ç‚¹åæ§½ã€‚ã€‚ã€‚</p>\n<p>åœ¨å•é¡µé¢åº”ç”¨ä¸­ï¼Œå¯¹äºrouterçš„æ“æ§æ˜¯å¿…ä¸å¯å°‘çš„ä¸€éƒ¨åˆ†ï¼Œè€Œå…¶ä¸­å¯¹æµè§ˆå™¨historyçš„æ“ä½œéƒ½æ˜¯ç”±history.jså®Œæˆçš„ã€‚åœ¨<a href=\"https://github.com/ReactTraining/history#navigation\">å®˜æ–¹æ–‡æ¡£</a>ä¸­çš„è¿™é‡Œï¼šä½¿ç”¨react-routerçš„history.push æˆ–è€…replaceæ§åˆ¶URLè·³è½¬çš„æ—¶å€™ï¼Œæ­£å¸¸æ¥è¯´ä¼ é€’stateå¦‚ä¸‹ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">history<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\nhistory<span class=\"token punctuation\">.</span><span class=\"token function\">replace</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>å®˜æ–¹ç»™çš„ğŸŒ°ä¹Ÿå¾ˆç®€å•ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// Push a new entry onto the history stack.</span>\nhistory<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/home'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// Push a new entry onto the history stack with a query string</span>\n<span class=\"token comment\">// and some state. Location state does not appear in the URL.</span>\nhistory<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/home?the=query'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> some<span class=\"token punctuation\">:</span> <span class=\"token string\">'state'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\">// If you prefer, use a single location-like object to specify both</span>\n<span class=\"token comment\">// the URL and state. This is equivalent to the example above.</span>\nhistory<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  pathname<span class=\"token punctuation\">:</span> <span class=\"token string\">'/home'</span><span class=\"token punctuation\">,</span>\n  search<span class=\"token punctuation\">:</span> <span class=\"token string\">'?the=query'</span><span class=\"token punctuation\">,</span>\n  state<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> some<span class=\"token punctuation\">:</span> <span class=\"token string\">'state'</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>è¯´æ˜ä½¿ç”¨pushçš„å‚æ•°ä¸ºå­—ç¬¦ä¸²åŠ [state]å¯¹è±¡çš„æ—¶å€™ä½¿ç”¨ï¼Œæˆ–è€…ä¼ ä¸€ä¸ªç±»locationå½¢çš„å¯¹è±¡å³å¯ï¼Œä½†æ˜¯é—®é¢˜æ¥äº†ï¼š\nå½“æˆ‘ä½¿ç”¨ç¬¬ä¸€ç§æ–¹æ³•ï¼Œå³ <code class=\"language-text\">history.push(&#39;/&#39;, { some: &#39;state&#39; })</code>  æ—¶ç‚¸äº†ã€‚</p>\n<p>{% asset_img 1.png error %}</p>\n<p>æ–‡å­—è¶Šå°‘ï¼Œäº‹æƒ…è¶Šå¤§ï¼Œä¸€è¡Œå­—è¯´çš„ä¹Ÿå¾ˆæ¸…æ¥šï¼ŒHash historyä¸­ä¸èƒ½push stateï¼Œè¢«ã€‚ã€‚å¿½ç•¥äº†ï¼Ÿæ‰€ä»¥å¼€å§‹å®éªŒï¼Œæ¢æˆreplaceè¯•è¯•çœ‹ï¼š</p>\n<p>{% asset_img 2.png error %}</p>\n<p>ç„¶è€Œå¹¶æ²¡æœ‰æ²¡ä»€ä¹ˆåµç”¨ï¼Œäºæ˜¯å¼€å§‹googleå¯»æ±‚å¸®åŠ©ï¼Œå‡ºä¹æˆ‘æ„æ–™çš„æ˜¯ï¼Œå±…ç„¶æ²¡æœ‰äººæå‡ºè¿‡æˆ–è€…è®®è®ºè¿‡è¿™ä¸ªé—®é¢˜ï¼Œè¿™ä¹ˆç›´ç™½æŠ¥é”™å±…ç„¶æ²¡æœ‰ç­”æ¡ˆï¼Œéš¾é“æ˜¯å¤ªç®€å•äº†ä¸å±‘äºè®°å½•ï¼Ÿå†ä»”ç»†çœ‹çœ‹æŠ¥é”™ï¼Œå•¥å«è¢«å¿½ç•¥ï¼Ÿæ–‡æ¡£æ˜æ˜è¯´çš„æ˜¯è¿™ä¹ˆç”¨å‘€ï¼Œäºæ˜¯æ¢ä¸€ç§ç†è§£ï¼Œæ˜¯ä¸æ˜¯ä¸èƒ½ä¼ é€’å› ä¸ºä¼šè¢«å¿½ç•¥ï¼Ÿ\näºæ˜¯æ”¹ç”¨ä¼ å•ä¸ªå¯¹è±¡å‚æ•°çš„æ–¹å¼è¯•ä¸€è¯•ï¼Œæœç„¶ã€‚æ”¹ä¸ºï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">history.push({\n  pathname,\n  search,\n  state: { some: &#39;state&#39; }\n})</code></pre></div>\n<p>å°±ç®¡ç”¨äº†ã€‚ã€‚å¾ˆè¯¡å¼‚ï¼Œéš¾é“å®˜æ–¹æ–‡æ¡£ä¹Ÿæœ‰é—®é¢˜ï¼Ÿå¥½å§æˆ‘å¼€å§‹æ³¨æ„åˆ°ç‰ˆæœ¬çš„é—®é¢˜ã€‚æ–‡æ¡£çš„ç‰ˆæœ¬æ˜¯æœ€æ–°çš„v4.7.2ï¼Œæˆ‘åœ¨å·¥ç¨‹ä¸­ä½¿ç”¨çš„æ˜¯react-router-domçš„v4.1.1ç‰ˆæœ¬ä¸‹çš„historyï¼Œå‘ç°ç‰ˆæœ¬æ˜¯v4.5.1ã€‚è«éæ˜¯ç‰ˆæœ¬æ›´æ–°åæ”¹å†™äº†å‡½æ•°ï¼ŸæŸ¥è¯¢æœ€æ–°çš„react-router-dom v4.2.2ä¸­ä½¿ç”¨çš„historyç‰ˆæœ¬æ˜¯v4.7.2ï¼Œå³æœ€æ–°çš„ç‰ˆæœ¬ã€‚ç„¶åæŸ¥çœ‹äº†å®˜æ–¹æ–‡æ¡£çš„commit logï¼Œå‘ç°ç›¸å…³çš„å†…å®¹æ˜¯ä¸€å¹´ä»¥å‰å°±å†™ä¸Šçš„ï¼Œè€Œä¸”æ˜¯å°†åŸæœ¬çš„å•å‚æ•°æ”¹ä¸ºäº†åŒå‚æ•°ï¼Œçœ‹æ¥æ˜¯åœ¨è¿™ä¸€ç‰ˆæœ¬åŠ å…¥äº†ä¼ é€’stateçš„åŠŸèƒ½ã€‚</p>\n<p>{% asset_img 3.png version compare %}</p>\n<p>æ—¶é—´æ˜¯ 2016-9-10</p>\n<p>{% asset_img 4.png add push/replace %}</p>\n<p>å¥½çš„ï¼Œå†çœ‹react-routeré‚£è¾¹çš„ç‰ˆæœ¬æ—¶é—´ï¼Œv4.1.1çš„å‘å¸ƒæ—¶é—´æ˜¯2017-4-13</p>\n<p>{% asset_img 5.png relase time %}</p>\n<p>é‚£ä¹ˆå°±å¯ä»¥ç¡®å®šä¸æ˜¯ç‰ˆæœ¬è¿‡æ—©è€Œä¿®æ”¹åŠŸèƒ½çš„åŸå› ï¼Œé‚£ä¹ˆåˆ°åº•æ˜¯å•¥å‘¢ï¼Œä¿—è¯è¯´ï¼šæºç çœ‹ä¸å°‘ï¼Œ è£…é€¼è£…åˆ°è€ã€‚äºæ˜¯è¿˜æ˜¯å»æºç æ‰¾æ‰¾é—®é¢˜å§ã€‚æœç„¶ï¼Œåœ¨ history æºç çš„ createHashHistory ä¸­çš„pushå‡½æ•°æ˜¯è¿™æ ·å­ï¼š</p>\n<p>{% asset_img 6.png source code %}</p>\n<p>ç¬¬äºŒä¸ªå‚æ•°è‹¥ä¸ä¸ºç©ºåˆ™æŠ¥é”™ï¼Œå¹¶ä¸”åœ¨ä¹‹åçš„æ‰§è¡Œè¿‡ç¨‹ä¸­ä¹Ÿåªä¼šå¯¹ç¬¬ä¸€ä¸ªå‚æ•°è¿›è¡Œæ“ä½œï¼Œè½¬åŒ–ä¸ºlocationä¹‹åå°±è¿”å›ç»§ç»­åšè·³è½¬æ“ä½œäº†ã€‚è¿™ä¹ˆçœ‹å®˜æ–¹æ–‡æ¡£æ˜¯æœ‰é—®é¢˜çš„ã€‚</p>","frontmatter":{"title":"è®°ä¸€ä¸ªhistory.pushçš„å‚æ•°é—®é¢˜","date":"October 01, 2017","categories":"å¼±é¸¡ä¹‹è·¯"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/è®°ä¸€ä¸ªhistory-pushçš„å‚æ•°é—®é¢˜/","previous":{"fields":{"slug":"/è®ºæŒä¹…æˆ˜/"},"frontmatter":{"title":"è®ºæŒä¹…æˆ˜"}},"next":{"fields":{"slug":"/Reactv16-0æ–°ç‰¹æ€§æ¢ç©¶/"},"frontmatter":{"title":"React 16.0æ–°ç‰¹æ€§æ¢ç©¶"}}}}